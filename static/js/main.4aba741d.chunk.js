(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(e,t,a){e.exports=a(278)},157:function(e,t,a){},159:function(e,t,a){},161:function(e,t,a){},171:function(e,t,a){},173:function(e,t,a){},194:function(e,t,a){},276:function(e,t,a){},278:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),s=a(15),u=a.n(s),o=a(41),i=a(25),l=a(142),p=a(56),d=a(16),h="FETCH_PACKAGES_LIST",f="FETCH_MULTIPLE_PACKAGES_DETAILS";!function(e){e[e.OnGoing=-1]="OnGoing",e[e.Error=0]="Error",e[e.Success=1]="Success"}(n||(n={}));var m,b={knownDependencies:{}};!function(e){e.SearchPage="search",e.DetailsPage="details"}(m||(m={}));var y,g={page:m.SearchPage,hasToRedirect:!1};!function(e){e.Success="success",e.Error="error"}(y||(y={}));var v={state:y.Success,query:"",results:[]},E=Object(i.c)({details:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_MULTIPLE_PACKAGES_DETAILS":var a=t.payload.packages,r={},c=!0,s=!1,u=void 0;try{for(var o,i=a[Symbol.iterator]();!(c=(o=i.next()).done);c=!0)r[o.value]={status:n.OnGoing,dependencies:[]}}catch(v){s=!0,u=v}finally{try{c||null==i.return||i.return()}finally{if(s)throw u}}return Object(d.a)({},e,{knownDependencies:Object(d.a)({},e.knownDependencies,r)});case"UPDATE_PACKAGE_DETAILS":var l=t.payload,h=l.packageName,f=l.deps;return Object(d.a)({},e,{knownDependencies:Object(d.a)({},e.knownDependencies,Object(p.a)({},h,{status:n.Success,dependencies:Object.keys(f.collected.metadata.dependencies||[])}))});case"ERROR_PACKAGE_DETAILS":var m=t.payload,y=m.packageName,g=m.error;return Object(d.a)({},e,{knownDependencies:Object(d.a)({},e.knownDependencies,Object(p.a)({},y,{status:n.Error,statusText:g,dependencies:[]}))});default:return e}},router:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REDIRECT_TO_PAGE":var a=t.payload;return Object(d.a)({},e,{hasToRedirect:!0},a);case"END_OF_REDIRECT":return Object(d.a)({},e,{hasToRedirect:!1});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PACKAGES_LIST":var a=t.payload,n=a.query,r=a.searchResults;return Object(d.a)({},e,{state:y.Success,query:n,results:r});case"ERROR_PACKAGES_LIST":var c=t.payload,s=c.query,u=c.error;return Object(d.a)({},e,{state:y.Error,query:s,error:u});default:return e}}}),k=a(29),O=a.n(k),j=a(32),S=function(e,t){return{type:h,payload:{query:e,numResults:t}}},A=function(e,t){return{type:"UPDATE_PACKAGES_LIST",payload:{query:e,searchResults:t}}},w=function(e,t){return{type:"ERROR_PACKAGES_LIST",payload:{query:e,error:t}}},P=function(e){return{type:f,payload:{packages:e}}},D=function(e){return{type:"START_MULTIPLE_PACKAGES_DETAILS",payload:{packages:e}}},R=function(e,t){return{type:"UPDATE_PACKAGE_DETAILS",payload:{packageName:e,deps:t}}},T=function(e,t){return{type:"ERROR_PACKAGE_DETAILS",payload:{packageName:e,error:t}}},x=function(e){return{type:"REDIRECT_TO_PAGE",payload:e}},_=function(){return{type:"END_OF_REDIRECT",payload:{}}},C=a(105),N=a(23),L=a(24),q="https://api.npms.io",I=function(){function e(){Object(N.a)(this,e)}return Object(L.a)(e,null,[{key:"deps",value:function(){var e=Object(C.a)(O.a.mark(function e(t){var a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(q,"/v2/package/").concat(encodeURIComponent(t)),e.next=3,fetch(a);case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("[Status: ".concat(n.status,"] ").concat(n.statusText));case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"list",value:function(){var e=Object(C.a)(O.a.mark(function e(t,a){var n,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return n="".concat(q,"/v2/search/suggestions?q=").concat(encodeURIComponent(t),"&size=").concat(a),e.next=5,fetch(n);case 5:if((r=e.sent).ok){e.next=8;break}throw new Error("[Status: ".concat(r.status,"] ").concat(r.statusText));case 8:return e.next=10,r.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),G=O.a.mark(M),K=O.a.mark(U),Q=O.a.mark(F);function M(e){var t,a,n,r;return O.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,a=t.query,n=t.numResults,c.prev=1,c.next=4,Object(j.a)(function(){return I.list(a,n)});case 4:return r=c.sent,c.next=7,Object(j.b)(A(a,r));case 7:c.next=13;break;case 9:return c.prev=9,c.t0=c.catch(1),c.next=13,Object(j.b)(w(a,c.t0.message||String(c.t0)));case 13:case"end":return c.stop()}},G,null,[[1,9]])}function U(e){var t,a,n,r,c,s,u;return O.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.packages,o.next=3,Object(j.b)(D(t));case 3:a=!0,n=!1,r=void 0,o.prev=6,c=O.a.mark(function e(){var t,a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.value,e.prev=1,e.next=4,Object(j.a)(function(){return I.deps(t)});case 4:return a=e.sent,e.next=7,Object(j.b)(R(t,a));case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,Object(j.b)(T(t,e.t0.message||String(e.t0)));case 13:case"end":return e.stop()}},e,null,[[1,9]])}),s=t[Symbol.iterator]();case 9:if(a=(u=s.next()).done){o.next=14;break}return o.delegateYield(c(),"t0",11);case 11:a=!0,o.next=9;break;case 14:o.next=20;break;case 16:o.prev=16,o.t1=o.catch(6),n=!0,r=o.t1;case 20:o.prev=20,o.prev=21,a||null==s.return||s.return();case 23:if(o.prev=23,!n){o.next=26;break}throw r;case 26:return o.finish(23);case 27:return o.finish(20);case 28:case"end":return o.stop()}},K,null,[[6,16,20,28],[21,,23,27]])}function F(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.d)(h,M);case 2:return e.next=4,Object(j.c)(f,U);case 4:case"end":return e.stop()}},Q)}var W=Object(l.a)(),H=Object(i.d)(E,Object(i.a)(W));W.run(F);a(157);var J=a(303),z=a(301),B=a(27),Y=a(26),V=a(28),X=(a(159),a(302)),Z=(a(161),a(299)),$=a(121),ee=a.n($),te=function(e){function t(){return Object(N.a)(this,t),Object(B.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"query-error"},c.a.createElement("p",null,"Query failed with error: ",this.props.error),c.a.createElement(Z.a,{variant:"contained",onClick:function(){return e.props.retry()}},"Retry ",c.a.createElement(ee.a,null)))}}]),t}(c.a.Component),ae=(a(171),a(173),a(122)),ne=a.n(ae),re=a(124),ce=a.n(re),se=a(106),ue=a.n(se),oe=a(123),ie=a.n(oe),le=a(68),pe=a.n(le),de=function(e){function t(){return Object(N.a)(this,t),Object(B.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this,t=this.props.package.name,a=this.props.package.author?this.props.package.author.username:"N.A",n=this.props.score.detail,r={maintenance:Math.round(5*n.maintenance),popularity:Math.round(5*n.popularity),quality:Math.round(5*n.quality)};return c.a.createElement(ne.a,{className:"package-card",onClick:function(){return e.props.select()}},c.a.createElement(ie.a,{className:"card-header",avatar:c.a.createElement(pe.a,{className:"card-avatar","aria-label":t},t[0]||""),title:t,subheader:this.props.package.version}),c.a.createElement(ce.a,null,c.a.createElement(ue.a,{color:"textSecondary",gutterBottom:!0},a),c.a.createElement(ue.a,{component:"p"},this.props.package.description),c.a.createElement("div",{className:"package-scores"},c.a.createElement(pe.a,{title:"maintenance [0-5]",className:"package-score-".concat(r.maintenance)},r.maintenance),c.a.createElement(pe.a,{title:"popularity [0-5]",className:"package-score-".concat(r.popularity)},r.popularity),c.a.createElement(pe.a,{title:"quality [0-5]",className:"package-score-".concat(r.quality)},r.quality))))}}]),t}(c.a.Component),he=function(e){function t(){return Object(N.a)(this,t),Object(B.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this,t="query-results";return 0===this.props.query.length?c.a.createElement("div",{id:t}):0===this.props.results.length?c.a.createElement("div",{id:t},c.a.createElement("p",null,"No results")):c.a.createElement("div",{id:t},c.a.createElement("div",{className:"query-results-cards"},c.a.createElement("ul",null,this.props.results.map(function(t,a){return c.a.createElement("li",{key:"li-".concat(a)},c.a.createElement(de,{key:a,package:t.package,score:t.score,searchScore:t.searchScore,select:function(){return e.props.selectPackage(t.package.name)}}))}))))}}]),t}(c.a.Component),fe=a(128),me=a.n(fe),be=a(125),ye=a.n(be),ge=a(127),ve=a.n(ge),Ee=a(126),ke=a.n(Ee),Oe=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(B.a)(this,Object(Y.a)(t).call(this,e))).state={currentQuery:e.query},a}return Object(V.a)(t,e),Object(L.a)(t,[{key:"fetchQuery",value:function(e){this.props.fetchPackagesListAction(e,t.NumResultsPerQuery)}},{key:"fetch",value:function(e){var t=e.currentTarget.value;this.setState({currentQuery:t}),this.fetchQuery(t)}},{key:"openPackage",value:function(e){this.props.redirectToPageAction({page:m.DetailsPage,packageName:e})}},{key:"render",value:function(){var e=this,t=this.state.currentQuery!==this.props.query?c.a.createElement(ye.a,null):this.props.state===y.Success?c.a.createElement(ke.a,null):c.a.createElement(ve.a,null);return c.a.createElement("div",{id:"package-selector"},c.a.createElement(X.a,{id:"package-name-input",label:"Package Name",variant:"outlined",onChange:function(t){return e.fetch(t)},value:this.state.currentQuery,InputProps:{endAdornment:c.a.createElement(me.a,{position:"start"},t)}}),this.props.state===y.Success?c.a.createElement(he,{query:this.props.query,results:this.props.results,selectPackage:function(t){return e.openPackage(t)}}):c.a.createElement(te,{error:this.props.error,retry:function(){return e.fetchQuery(e.state.currentQuery)}}))}}]),t}(c.a.Component);Oe.NumResultsPerQuery=9;var je=Object(o.b)(function(e){return Object(d.a)({},e.search)},function(e){return Object(d.a)({},Object(i.b)({fetchPackagesListAction:S,redirectToPageAction:x},e))})(Oe),Se=a(304),Ae=a(306),we=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(B.a)(this,Object(Y.a)(t).call(this,e))).state={endOfRedirectDetected:!1},a}return Object(V.a)(t,e),Object(L.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.location!==this.props.location?(this.props.endOfRedirectAction(),this.setState({endOfRedirectDetected:!0})):this.setState({endOfRedirectDetected:!1})}},{key:"render",value:function(){if(!this.props.router.hasToRedirect||this.state.endOfRedirectDetected)return c.a.createElement(r.Fragment,null);switch(this.props.router.page){case m.SearchPage:return c.a.createElement(Se.a,{to:"/"});case m.DetailsPage:var e=this.props.router.packageName;return c.a.createElement(Se.a,{to:"/details/".concat(e)})}}}]),t}(c.a.Component);var Pe=Object(Ae.a)(Object(o.b)(function(e){return e},function(e){return Object(d.a)({},Object(i.b)({endOfRedirectAction:_},e))})(we)),De=(a(194),a(141)),Re=a(139),Te=a.n(Re),xe=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(B.a)(this,Object(Y.a)(t).call(this,e))).state=Object(d.a)({},a.computeState(a.props),{width:window.innerWidth}),a}return Object(V.a)(t,e),Object(L.a)(t,[{key:"computeState",value:function(e){for(var t=[],a=[],r=[],c=!0,s=0,u=0,o=null!=e.packageName?Object(p.a)({},e.packageName,!0):{},i=null!=e.packageName?[{name:e.packageName,depth:0}]:[];i.length>0;){++s;var l=i.pop(),d=l.name,h=l.depth,f=e.knownDependencies[d];if(null!=f){switch(f.status){case n.Error:t.push({color:"red",label:d});break;case n.OnGoing:t.push({color:"green",label:d}),++u,c=!1;break;case n.Success:default:var m=Math.min(64*h,191),b=m<16?"0".concat(m.toString(16)):m.toString(16);t.push({color:"#".concat(b).concat(b,"ff"),label:d})}var y=!0,g=!1,v=void 0;try{for(var E,k=f.dependencies[Symbol.iterator]();!(y=(E=k.next()).done);y=!0){var O=E.value;a.push({target:d,source:O}),o[O]||(i.push({name:O,depth:h+1}),o[O]=!0)}}catch(j){g=!0,v=j}finally{try{y||null==k.return||k.return()}finally{if(g)throw v}}}else t.push({color:"black",label:d}),r.push(d),c=!1}return r.length>0&&(console.warn("Asking some more packages: ",r),this.props.fetchMultiplePackagesDetailsAction(r)),c?{data:{nodes:t,links:a},total:s,numLoading:u}:{total:s,numLoading:u}}},{key:"componentWillReceiveProps",value:function(e){var t=Object(d.a)({},this.state,this.computeState(e));JSON.stringify(this.state)!==JSON.stringify(t)&&this.setState(t)}},{key:"render",value:function(){if(null==this.state.data)return c.a.createElement(r.Fragment,null,c.a.createElement(Te.a,null),c.a.createElement("div",null,"Currently loading ",this.state.numLoading," package(s)..."),c.a.createElement("div",null,"Over ",this.state.total," detected"));var e=this.state.data.nodes.map(function(e){return{id:e.label,color:e.color}}),a=this.state.data.links,n=this.state.width>=t.DefaultWidth?t.DefaultWidth:this.state.width,s=Math.floor(n*t.DefaultHeight/t.DefaultWidth);return c.a.createElement("div",{className:"package-details"},c.a.createElement("h2",null,this.props.packageName," (",this.state.data.nodes.length," packages)"),c.a.createElement("div",{className:"package-force-directed"},c.a.createElement("div",{style:{textAlign:"left",display:"inline-block",width:"".concat(n,"px")}},c.a.createElement(De.a,{graphData:{nodes:e,links:a},nodeLabel:"id",width:n,height:s,linkDirectionalParticles:1}))))}}]),t}(c.a.Component);xe.DefaultWidth=800,xe.DefaultHeight=600;var _e=Object(o.b)(function(e){return{knownDependencies:e.details.knownDependencies}},function(e){return Object(d.a)({},Object(i.b)({fetchMultiplePackagesDetailsAction:P},e))})(xe),Ce=(a(276),a(300)),Ne=a(140),Le=a.n(Ne),qe=function(e){function t(){return Object(N.a)(this,t),Object(B.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{id:"floating-menu"},c.a.createElement(Ce.a,{color:"primary",onClick:function(){return e.props.redirectToPageAction({page:m.SearchPage})}},c.a.createElement(Le.a,null)))}}]),t}(c.a.Component),Ie=Object(o.b)(function(e){return{}},function(e){return Object(d.a)({},Object(i.b)({redirectToPageAction:x},e))})(qe),Ge=document.getElementById("root");u.a.render(c.a.createElement(o.a,{store:H},c.a.createElement(J.a,null,c.a.createElement("div",{id:"main"},c.a.createElement("h1",null,"Package Analyzer"),c.a.createElement(z.a,{exact:!0,path:"/",component:function(){return c.a.createElement(r.Fragment,null,c.a.createElement(Pe,null),c.a.createElement(je,null))}}),c.a.createElement(z.a,{path:"/details/:package",component:function(e){return c.a.createElement(r.Fragment,null,c.a.createElement(Pe,null),c.a.createElement(Ie,null),c.a.createElement(_e,{packageName:e.match.params.package}))}})))),Ge)}},[[146,2,1]]]);
//# sourceMappingURL=main.4aba741d.chunk.js.map