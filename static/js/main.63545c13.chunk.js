(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,a){e.exports=a(263)},137:function(e,t,a){},139:function(e,t,a){},141:function(e,t,a){},154:function(e,t,a){},156:function(e,t,a){},179:function(e,t,a){},261:function(e,t,a){},263:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),u=a.n(c),o=(a(137),a(288)),s=a(286),i=(a(139),a(287)),l=(a(141),a(284)),d=a(106),m=a.n(d);var p=function(e){return r.a.createElement("div",{className:"query-error"},r.a.createElement("p",null,"Query failed with error: ",e.error),r.a.createElement(l.a,{variant:"contained",onClick:function(){return e.retry()}},"Retry ",r.a.createElement(m.a,null)))},g=(a(154),a(156),a(107)),f=a.n(g),h=a(109),v=a.n(h),E=a(81),b=a.n(E),k=a(108),y=a.n(k),O=a(50),j=a.n(O);var w=function(e){var t=e.package.name,a=e.package.author?e.package.author.username:"N.A",n=e.score.detail,c={maintenance:Math.round(5*n.maintenance),popularity:Math.round(5*n.popularity),quality:Math.round(5*n.quality)};return r.a.createElement(f.a,{className:"package-card",onClick:function(){return e.select()}},r.a.createElement(y.a,{className:"card-header",avatar:r.a.createElement(j.a,{className:"card-avatar","aria-label":t},t[0]||""),title:t,subheader:e.package.version}),r.a.createElement(v.a,null,r.a.createElement(b.a,{color:"textSecondary",gutterBottom:!0},a),r.a.createElement(b.a,{component:"p"},e.package.description),r.a.createElement("div",{className:"package-scores"},r.a.createElement(j.a,{title:"maintenance [0-5]",className:"package-score-".concat(c.maintenance)},c.maintenance),r.a.createElement(j.a,{title:"popularity [0-5]",className:"package-score-".concat(c.popularity)},c.popularity),r.a.createElement(j.a,{title:"quality [0-5]",className:"package-score-".concat(c.quality)},c.quality))))};var S,N=function(e){var t="query-results";return 0===e.query.length?r.a.createElement("div",{id:t}):0===e.results.length?r.a.createElement("div",{id:t},r.a.createElement("p",null,"No results")):r.a.createElement("div",{id:t},r.a.createElement("div",{className:"query-results-cards"},r.a.createElement("ul",null,e.results.map(function(t,a){return r.a.createElement("li",{key:"li-".concat(a)},r.a.createElement(w,{key:a,package:t.package,score:t.score,searchScore:t.searchScore,select:function(){return e.selectPackage(t.package.name)}}))}))))},x=a(115),q=a.n(x),P=a(112),C=a.n(P),G=a(114),D=a.n(G),I=a(113),L=a.n(I),M=a(51),Q=a.n(M),R=a(82),z=a(110),A=a(111),T="https://api.npms.io",U=function(){function e(){Object(z.a)(this,e)}return Object(A.a)(e,null,[{key:"deps",value:function(){var e=Object(R.a)(Q.a.mark(function e(t){var a,n;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(T,"/v2/package/").concat(encodeURIComponent(t)),e.next=3,fetch(a);case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("[Status: ".concat(n.status,"] ").concat(n.statusText));case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"list",value:function(){var e=Object(R.a)(Q.a.mark(function e(t,a){var n,r;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return n="".concat(T,"/v2/search/suggestions?q=").concat(encodeURIComponent(t),"&size=").concat(a),e.next=5,fetch(n);case 5:if((r=e.sent).ok){e.next=8;break}throw new Error("[Status: ".concat(r.status,"] ").concat(r.statusText));case 8:return e.next=10,r.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),B=a(26);!function(e){e.Success="success",e.Error="error",e.OnGoing="ongoing"}(S||(S={}));var F=a(289),J=9;var H=Object(F.a)(function(e){var t=function(e,t,a){var r=Object(n.useState)(e),c=Object(B.a)(r,2),u=c[0],o=c[1],s=Object(n.useState)(S.Success),i=Object(B.a)(s,2),l=i[0],d=i[1],m=Object(n.useRef)(u),p=Object(n.useState)({query:e,state:S.Success,results:t}),g=Object(B.a)(p,2),f=g[0],h=g[1],v=function(){var e=m.current;d(S.OnGoing),a(e).then(function(t){m.current===e&&(d(S.Success),h({query:e,state:S.Success,results:t}))},function(t){m.current===e&&(d(S.Error),h({query:e,state:S.Error,error:t.message||String(t)}))})};return Object(n.useEffect)(function(){m.current=u,v()},[u]),{query:u,status:l,setQuery:o,runQuery:v,lastSearch:f}}("",[],function(e){return U.list(e,J)}),a=t.query,c=t.status,u=t.setQuery,o=t.runQuery,s=t.lastSearch,l=c===S.OnGoing?r.a.createElement(C.a,null):c===S.Success?r.a.createElement(L.a,null):r.a.createElement(D.a,null);return r.a.createElement("div",{id:"package-selector"},r.a.createElement(i.a,{id:"package-name-input",label:"Package Name",variant:"outlined",onChange:function(e){return u(e.currentTarget.value)},value:a,InputProps:{endAdornment:r.a.createElement(q.a,{position:"start"},l)}}),s.state===S.Success?r.a.createElement(N,{query:s.query,results:s.results,selectPackage:function(t){e.history.push("/details/".concat(encodeURIComponent(t)))}}):r.a.createElement(p,{error:s.error,retry:function(){return o()}}))});var W=function(){return r.a.createElement(H,null)},K=a(46),V=(a(179),a(129)),X=a(127),Y=a.n(X),Z=a(48),$=a(47),_=Object(n.createContext)({});function ee(e){return{nodes:[],ongoingNodes:[{label:e,depth:0,status:S.OnGoing}],links:[]}}function te(e){var t=function(){var e=Object(n.useContext)(_);if(void 0===e)throw new Error("usePackageDetails must be used within a PackageDetailsProvider");return e}().getPackageDetails,a=Object(n.useState)(ee(e)),r=Object(B.a)(a,2),c=r[0],u=r[1],o=function(e){if(0!==e.ongoingNodes.length){for(var a=Object(Z.a)(e.nodes),n=Object(Z.a)(e.links),r=[],c=new Set([].concat(Object(Z.a)(e.nodes),Object(Z.a)(e.ongoingNodes)).map(function(e){return e.label})),o=Object(Z.a)(e.ongoingNodes);o.length>0;){var s=o.pop(),i=s.label,l=s.depth,d=t(i),m={label:i,depth:l,status:d.status};switch(d.status){case S.Error:a.push(m);break;case S.OnGoing:r.push(m);break;case S.Success:a.push(m);var p=!0,g=!1,f=void 0;try{for(var h,v=d.package.dependencies[Symbol.iterator]();!(p=(h=v.next()).done);p=!0){var E=h.value;n.push({target:i,source:E}),c.has(E)||(o.push({label:E,depth:l+1}),c.add(E))}}catch(b){g=!0,f=b}finally{try{p||null==v.return||v.return()}finally{if(g)throw f}}}}u({nodes:a,ongoingNodes:r,links:n})}};return Object(n.useEffect)(function(){var t=ee(e);o(t)},[e]),Object(n.useEffect)(function(){return o(c)},[t]),{graph:{nodes:c.nodes.concat(c.ongoingNodes),links:c.links},numLoading:c.ongoingNodes.length,total:c.nodes.length+c.ongoingNodes.length}}function ae(){return{width:window.innerWidth,height:window.innerHeight}}var ne=800,re=600;var ce=function(e){var t=te(e.packageName),a=t.graph,c=t.numLoading,u=t.total,o=function(){var e=Object(n.useState)(ae()),t=Object(B.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)(function(){function e(){r(ae())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]),a}().width;if(c>0)return r.a.createElement(n.Fragment,null,r.a.createElement(Y.a,null),r.a.createElement("div",null,"Currently loading ",c," package(s)..."),r.a.createElement("div",null,"Over ",u," detected"));var s=o>=ne?ne:o,i=Math.floor(s*re/ne),l=a.nodes.map(function(e){switch(e.status){case S.Error:return{id:e.label,color:"red"};case S.OnGoing:return{id:e.label,color:"green"};case S.Success:var t=Math.min(64*e.depth,191),a=t<16?"0".concat(t.toString(16)):t.toString(16);return{id:e.label,color:"#".concat(a).concat(a,"ff")}}}),d=a.links.map(function(e){return Object(K.a)({},e)});return r.a.createElement("div",{className:"package-details"},r.a.createElement("h2",null,e.packageName," (",u," packages)"),r.a.createElement("div",{className:"package-force-directed"},r.a.createElement("div",{style:{textAlign:"left",display:"inline-block",width:"".concat(s,"px")}},r.a.createElement(V.a,{graphData:{nodes:l,links:d},nodeLabel:"id",width:s,height:i,linkDirectionalParticles:1}))))},ue=(a(261),a(285)),oe=a(128),se=a.n(oe);var ie=Object(F.a)(function(e){return r.a.createElement("div",{id:"floating-menu"},r.a.createElement(ue.a,{color:"primary",onClick:function(){return e.history.push("/")}},r.a.createElement(se.a,null)))});var le=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(ie,null),r.a.createElement(ce,{packageName:e.match.params.package}))},de=document.getElementById("root");u.a.render(r.a.createElement(o.a,null,r.a.createElement(function(e){var t=Object(n.useState)({}),a=Object(B.a)(t,2),c=a[0],u=a[1];return r.a.createElement(_.Provider,Object.assign({value:{getPackageDetails:function(e){if(c[e])return c[e];var t={status:S.OnGoing};return u(function(a){return Object(K.a)({},a,Object($.a)({},e,t))}),U.deps(e).then(function(t){var a=Object.keys(t.collected.metadata.dependencies||{});u(function(t){return Object(K.a)({},t,Object($.a)({},e,{status:S.Success,package:{dependencies:a}}))})},function(t){u(function(t){return Object(K.a)({},t,Object($.a)({},e,{status:S.Error}))})}),t}}},e))},null,r.a.createElement("div",{id:"main"},r.a.createElement("h1",null,"Package Analyzer"),r.a.createElement(s.a,{exact:!0,path:"/",component:W}),r.a.createElement(s.a,{path:"/details/:package",component:le})))),de)}},[[132,2,1]]]);
//# sourceMappingURL=main.63545c13.chunk.js.map