(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(e,t,a){e.exports=a(262)},136:function(e,t,a){},138:function(e,t,a){},140:function(e,t,a){},153:function(e,t,a){},155:function(e,t,a){},178:function(e,t,a){},260:function(e,t,a){},262:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),u=a.n(c),l=(a(136),a(287)),o=a(285),s=(a(138),a(286)),i=(a(140),a(283)),m=a(105),p=a.n(m);var d=function(e){return r.a.createElement("div",{className:"query-error"},r.a.createElement("p",null,"Query failed with error: ",e.error),r.a.createElement(i.a,{variant:"contained",onClick:function(){return e.retry()}},"Retry ",r.a.createElement(p.a,null)))},f=(a(153),a(155),a(106)),g=a.n(f),v=a(108),E=a.n(v),h=a(80),k=a.n(h),y=a(107),b=a.n(y),O=a(49),j=a.n(O);var S=function(e){var t=e.package.name,a=e.package.author?e.package.author.username:"N.A",n=e.score.detail,c={maintenance:Math.round(5*n.maintenance),popularity:Math.round(5*n.popularity),quality:Math.round(5*n.quality)};return r.a.createElement(g.a,{className:"package-card",onClick:function(){return e.select()}},r.a.createElement(b.a,{className:"card-header",avatar:r.a.createElement(j.a,{className:"card-avatar","aria-label":t},t[0]||""),title:t,subheader:e.package.version}),r.a.createElement(E.a,null,r.a.createElement(k.a,{color:"textSecondary",gutterBottom:!0},a),r.a.createElement(k.a,{component:"p"},e.package.description),r.a.createElement("div",{className:"package-scores"},r.a.createElement(j.a,{title:"maintenance [0-5]",className:"package-score-".concat(c.maintenance)},c.maintenance),r.a.createElement(j.a,{title:"popularity [0-5]",className:"package-score-".concat(c.popularity)},c.popularity),r.a.createElement(j.a,{title:"quality [0-5]",className:"package-score-".concat(c.quality)},c.quality))))};var w,x=function(e){var t="query-results";return 0===e.query.length?r.a.createElement("div",{id:t}):0===e.results.length?r.a.createElement("div",{id:t},r.a.createElement("p",null,"No results")):r.a.createElement("div",{id:t},r.a.createElement("div",{className:"query-results-cards"},r.a.createElement("ul",null,e.results.map(function(t,a){return r.a.createElement("li",{key:"li-".concat(a)},r.a.createElement(S,{key:a,package:t.package,score:t.score,searchScore:t.searchScore,select:function(){return e.selectPackage(t.package.name)}}))}))))},q=a(114),N=a.n(q),P=a(111),C=a.n(P),D=a(113),G=a.n(D),I=a(112),M=a.n(I),Q=a(50),R=a.n(Q),A=a(81),L=a(109),T=a(110),U="https://api.npms.io",z=function(){function e(){Object(L.a)(this,e)}return Object(T.a)(e,null,[{key:"deps",value:function(){var e=Object(A.a)(R.a.mark(function e(t){var a,n;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(U,"/v2/package/").concat(encodeURIComponent(t)),e.next=3,fetch(a);case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("[Status: ".concat(n.status,"] ").concat(n.statusText));case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"list",value:function(){var e=Object(A.a)(R.a.mark(function e(t,a){var n,r;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return n="".concat(U,"/v2/search/suggestions?q=").concat(encodeURIComponent(t),"&size=").concat(a),e.next=5,fetch(n);case 5:if((r=e.sent).ok){e.next=8;break}throw new Error("[Status: ".concat(r.status,"] ").concat(r.statusText));case 8:return e.next=10,r.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),B=a(45);!function(e){e.Success="success",e.Error="error",e.OnGoing="ongoing"}(w||(w={}));var F=a(288),J=9;var H=Object(F.a)(function(e){var t=function(e,t,a){var r=Object(n.useState)(e),c=Object(B.a)(r,2),u=c[0],l=c[1],o=Object(n.useState)(w.Success),s=Object(B.a)(o,2),i=s[0],m=s[1],p=Object(n.useRef)(u),d=Object(n.useState)({query:e,state:w.Success,results:t}),f=Object(B.a)(d,2),g=f[0],v=f[1],E=function(){var e=p.current;m(w.OnGoing),a(e).then(function(t){p.current===e&&(m(w.Success),v({query:e,state:w.Success,results:t}))},function(t){p.current===e&&(m(w.Error),v({query:e,state:w.Error,error:t.message||String(t)}))})};return Object(n.useEffect)(function(){p.current=u,E()},[u]),{query:u,status:i,setQuery:l,runQuery:E,lastSearch:g}}("",[],function(e){return z.list(e,J)}),a=t.query,c=t.status,u=t.setQuery,l=t.runQuery,o=t.lastSearch,i=c===w.OnGoing?r.a.createElement(C.a,null):c===w.Success?r.a.createElement(M.a,null):r.a.createElement(G.a,null);return r.a.createElement("div",{id:"package-selector"},r.a.createElement(s.a,{id:"package-name-input",label:"Package Name",variant:"outlined",onChange:function(e){return u(e.currentTarget.value)},value:a,InputProps:{endAdornment:r.a.createElement(N.a,{position:"start"},i)}}),o.state===w.Success?r.a.createElement(x,{query:o.query,results:o.results,selectPackage:function(t){e.history.push("/details/".concat(encodeURIComponent(t)))}}):r.a.createElement(d,{error:o.error,retry:function(){return l()}}))});var K=function(){return r.a.createElement(H,null)},V=a(37),W=(a(178),a(128)),X=a(126),Y=a.n(X),Z=a(71),$=Object(n.createContext)({});var _=800,ee=600;var te=function(e){var t=function(){var e=Object(n.useContext)($);if(void 0===e)throw new Error("usePackageDetails must be used within a PackageDetailsProvider");return e}().getPackageDetails,a=function(e,t){for(var a=[],n=[],r=!0,c=0,u=0,l=Object(V.a)({},e,!0),o=[{name:e,depth:0}];o.length>0;){++c;var s=o.pop(),i=s.name,m=s.depth,p=t(i);switch(p.status){case w.Error:a.push({color:"red",label:i});break;case w.OnGoing:a.push({color:"green",label:i}),++u,r=!1;break;case w.Success:var d=Math.min(64*m,191),f=d<16?"0".concat(d.toString(16)):d.toString(16);a.push({color:"#".concat(f).concat(f,"ff"),label:i});var g=!0,v=!1,E=void 0;try{for(var h,k=p.package.dependencies[Symbol.iterator]();!(g=(h=k.next()).done);g=!0){var y=h.value;n.push({target:i,source:y}),l[y]||(o.push({name:y,depth:m+1}),l[y]=!0)}}catch(b){v=!0,E=b}finally{try{g||null==k.return||k.return()}finally{if(v)throw E}}}}return r?{data:{nodes:a,links:n},total:c,numLoading:u}:{total:c,numLoading:u}}(e.packageName,t);if(null==a.data)return r.a.createElement(n.Fragment,null,r.a.createElement(Y.a,null),r.a.createElement("div",null,"Currently loading ",a.numLoading," package(s)..."),r.a.createElement("div",null,"Over ",a.total," detected"));var c=a.data.nodes.map(function(e){return{id:e.label,color:e.color}}),u=a.data.links,l=_,o=Math.floor(l*ee/_);return r.a.createElement("div",{className:"package-details"},r.a.createElement("h2",null,e.packageName," (",a.data.nodes.length," packages)"),r.a.createElement("div",{className:"package-force-directed"},r.a.createElement("div",{style:{textAlign:"left",display:"inline-block",width:"".concat(l,"px")}},r.a.createElement(W.a,{graphData:{nodes:c,links:u},nodeLabel:"id",width:l,height:o,linkDirectionalParticles:1}))))},ae=(a(260),a(284)),ne=a(127),re=a.n(ne);var ce=Object(F.a)(function(e){return r.a.createElement("div",{id:"floating-menu"},r.a.createElement(ae.a,{color:"primary",onClick:function(){return e.history.push("/")}},r.a.createElement(re.a,null)))});var ue=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(ce,null),r.a.createElement(te,{packageName:e.match.params.package}))},le=document.getElementById("root");u.a.render(r.a.createElement(l.a,null,r.a.createElement(function(e){var t=Object(n.useState)({}),a=Object(B.a)(t,2),c=a[0],u=a[1];return r.a.createElement($.Provider,Object.assign({value:{getPackageDetails:function(e){if(c[e])return c[e];var t={status:w.OnGoing};return u(function(a){return Object(Z.a)({},a,Object(V.a)({},e,t))}),z.deps(e).then(function(t){var a=Object.keys(t.collected.metadata.dependencies||{});u(function(t){return Object(Z.a)({},t,Object(V.a)({},e,{status:w.Success,package:{dependencies:a}}))})},function(t){u(function(t){return Object(Z.a)({},t,Object(V.a)({},e,{status:w.Error}))})}),t}}},e))},null,r.a.createElement("div",{id:"main"},r.a.createElement("h1",null,"Package Analyzer"),r.a.createElement(o.a,{exact:!0,path:"/",component:K}),r.a.createElement(o.a,{path:"/details/:package",component:ue})))),le)}},[[131,2,1]]]);
//# sourceMappingURL=main.702c76b0.chunk.js.map