(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,a){e.exports=a(268)},145:function(e,t,a){},147:function(e,t,a){},149:function(e,t,a){},159:function(e,t,a){},161:function(e,t,a){},184:function(e,t,a){},266:function(e,t,a){},268:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),u=a(13),o=a.n(u),l=a(39),i=a(22),s=a(21);!function(e){e.SearchPage="search",e.DetailsPage="details"}(n||(n={}));var m={page:n.SearchPage,hasToRedirect:!1},d=Object(i.b)({router:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REDIRECT_TO_PAGE":var a=t.payload;return Object(s.a)({},e,{hasToRedirect:!0},a);case"END_OF_REDIRECT":return Object(s.a)({},e,{hasToRedirect:!1});default:return e}}}),p=Object(i.c)(d),f=(a(145),a(293)),g=a(291),E=(a(147),a(292)),v=function(e){return{type:"REDIRECT_TO_PAGE",payload:e}},h=function(){return{type:"END_OF_REDIRECT",payload:{}}},b=(a(149),a(289)),k=a(110),O=a.n(k);var y=function(e){return c.a.createElement("div",{className:"query-error"},c.a.createElement("p",null,"Query failed with error: ",e.error),c.a.createElement(b.a,{variant:"contained",onClick:function(){return e.retry()}},"Retry ",c.a.createElement(O.a,null)))},j=(a(159),a(161),a(111)),S=a.n(j),P=a(113),w=a.n(P),N=a(91),x=a.n(N),R=a(112),q=a.n(R),T=a(59),D=a.n(T);var C=function(e){var t=e.package.name,a=e.package.author?e.package.author.username:"N.A",n=e.score.detail,r={maintenance:Math.round(5*n.maintenance),popularity:Math.round(5*n.popularity),quality:Math.round(5*n.quality)};return c.a.createElement(S.a,{className:"package-card",onClick:function(){return e.select()}},c.a.createElement(q.a,{className:"card-header",avatar:c.a.createElement(D.a,{className:"card-avatar","aria-label":t},t[0]||""),title:t,subheader:e.package.version}),c.a.createElement(w.a,null,c.a.createElement(x.a,{color:"textSecondary",gutterBottom:!0},a),c.a.createElement(x.a,{component:"p"},e.package.description),c.a.createElement("div",{className:"package-scores"},c.a.createElement(D.a,{title:"maintenance [0-5]",className:"package-score-".concat(r.maintenance)},r.maintenance),c.a.createElement(D.a,{title:"popularity [0-5]",className:"package-score-".concat(r.popularity)},r.popularity),c.a.createElement(D.a,{title:"quality [0-5]",className:"package-score-".concat(r.quality)},r.quality))))};var A,I=function(e){var t="query-results";return 0===e.query.length?c.a.createElement("div",{id:t}):0===e.results.length?c.a.createElement("div",{id:t},c.a.createElement("p",null,"No results")):c.a.createElement("div",{id:t},c.a.createElement("div",{className:"query-results-cards"},c.a.createElement("ul",null,e.results.map(function(t,a){return c.a.createElement("li",{key:"li-".concat(a)},c.a.createElement(C,{key:a,package:t.package,score:t.score,searchScore:t.searchScore,select:function(){return e.selectPackage(t.package.name)}}))}))))},_=a(119),G=a.n(_),F=a(116),M=a.n(F),Q=a(118),L=a.n(Q),z=a(117),B=a.n(z),J=a(60),U=a.n(J),H=a(92),K=a(114),V=a(115),W="https://api.npms.io",X=function(){function e(){Object(K.a)(this,e)}return Object(V.a)(e,null,[{key:"deps",value:function(){var e=Object(H.a)(U.a.mark(function e(t){var a,n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(W,"/v2/package/").concat(encodeURIComponent(t)),e.next=3,fetch(a);case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("[Status: ".concat(n.status,"] ").concat(n.statusText));case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"list",value:function(){var e=Object(H.a)(U.a.mark(function e(t,a){var n,r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return n="".concat(W,"/v2/search/suggestions?q=").concat(encodeURIComponent(t),"&size=").concat(a),e.next=5,fetch(n);case 5:if((r=e.sent).ok){e.next=8;break}throw new Error("[Status: ".concat(r.status,"] ").concat(r.statusText));case 8:return e.next=10,r.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),Y=a(34);!function(e){e.Success="success",e.Error="error",e.OnGoing="ongoing"}(A||(A={}));var Z=9;var $=Object(l.b)(function(e){return{}},function(e){return Object(s.a)({},Object(i.a)({redirectToPageAction:v},e))})(function(e){var t=function(e,t,a){var n=Object(r.useState)(e),c=Object(Y.a)(n,2),u=c[0],o=c[1],l=Object(r.useState)(A.Success),i=Object(Y.a)(l,2),s=i[0],m=i[1],d=Object(r.useRef)(u),p=Object(r.useState)({query:e,state:A.Success,results:t}),f=Object(Y.a)(p,2),g=f[0],E=f[1],v=function(){var e=d.current;m(A.OnGoing),a(e).then(function(t){d.current===e&&(m(A.Success),E({query:e,state:A.Success,results:t}))},function(t){d.current===e&&(m(A.Error),E({query:e,state:A.Error,error:t.message||String(t)}))})};return Object(r.useEffect)(function(){d.current=u,v()},[u]),{query:u,status:s,setQuery:o,runQuery:v,lastSearch:g}}("",[],function(e){return X.list(e,Z)}),a=t.query,u=t.status,o=t.setQuery,l=t.runQuery,i=t.lastSearch,s=u===A.OnGoing?c.a.createElement(M.a,null):u===A.Success?c.a.createElement(B.a,null):c.a.createElement(L.a,null);return c.a.createElement("div",{id:"package-selector"},c.a.createElement(E.a,{id:"package-name-input",label:"Package Name",variant:"outlined",onChange:function(e){return o(e.currentTarget.value)},value:a,InputProps:{endAdornment:c.a.createElement(G.a,{position:"start"},s)}}),i.state===A.Success?c.a.createElement(I,{query:i.query,results:i.results,selectPackage:function(t){e.redirectToPageAction({page:n.DetailsPage,packageName:t})}}):c.a.createElement(y,{error:i.error,retry:function(){return l()}}))}),ee=a(294),te=a(295);var ae=Object(te.a)(Object(l.b)(function(e){return e},function(e){return Object(s.a)({},Object(i.a)({endOfRedirectAction:h},e))})(function(e){var t=Object(r.useState)(!1),a=Object(Y.a)(t,2),u=a[0],o=a[1],l=Object(r.useState)(null),i=Object(Y.a)(l,2),s=i[0],m=i[1];if(Object(r.useEffect)(function(){var t=e.location;s!==t?(e.endOfRedirectAction(),o(!0)):o(!1),m(t)}),!e.router.hasToRedirect||u)return c.a.createElement(r.Fragment,null);switch(e.router.page){case n.SearchPage:return c.a.createElement(ee.a,{to:"/"});case n.DetailsPage:var d=e.router.packageName;return c.a.createElement(ee.a,{to:"/details/".concat(d)})}}));var ne=function(){return c.a.createElement(r.Fragment,null,c.a.createElement(ae,null),c.a.createElement($,null))},re=a(41),ce=(a(184),a(132)),ue=a(130),oe=a.n(ue),le=Object(r.createContext)({});var ie=800,se=600;var me=function(e){var t=function(){var e=Object(r.useContext)(le);if(void 0===e)throw new Error("usePackageDetails must be used within a PackageDetailsProvider");return e}().getPackageDetails,a=function(e,t){for(var a=[],n=[],r=!0,c=0,u=0,o=Object(re.a)({},e,!0),l=[{name:e,depth:0}];l.length>0;){++c;var i=l.pop(),s=i.name,m=i.depth,d=t(s);switch(d.status){case A.Error:a.push({color:"red",label:s});break;case A.OnGoing:a.push({color:"green",label:s}),++u,r=!1;break;case A.Success:var p=Math.min(64*m,191),f=p<16?"0".concat(p.toString(16)):p.toString(16);a.push({color:"#".concat(f).concat(f,"ff"),label:s});var g=!0,E=!1,v=void 0;try{for(var h,b=d.package.dependencies[Symbol.iterator]();!(g=(h=b.next()).done);g=!0){var k=h.value;n.push({target:s,source:k}),o[k]||(l.push({name:k,depth:m+1}),o[k]=!0)}}catch(O){E=!0,v=O}finally{try{g||null==b.return||b.return()}finally{if(E)throw v}}}}return r?{data:{nodes:a,links:n},total:c,numLoading:u}:{total:c,numLoading:u}}(e.packageName,t);if(null==a.data)return c.a.createElement(r.Fragment,null,c.a.createElement(oe.a,null),c.a.createElement("div",null,"Currently loading ",a.numLoading," package(s)..."),c.a.createElement("div",null,"Over ",a.total," detected"));var n=a.data.nodes.map(function(e){return{id:e.label,color:e.color}}),u=a.data.links,o=ie,l=Math.floor(o*se/ie);return c.a.createElement("div",{className:"package-details"},c.a.createElement("h2",null,e.packageName," (",a.data.nodes.length," packages)"),c.a.createElement("div",{className:"package-force-directed"},c.a.createElement("div",{style:{textAlign:"left",display:"inline-block",width:"".concat(o,"px")}},c.a.createElement(ce.a,{graphData:{nodes:n,links:u},nodeLabel:"id",width:o,height:l,linkDirectionalParticles:1}))))},de=(a(266),a(290)),pe=a(131),fe=a.n(pe);var ge=Object(l.b)(function(e){return{}},function(e){return Object(s.a)({},Object(i.a)({redirectToPageAction:v},e))})(function(e){return c.a.createElement("div",{id:"floating-menu"},c.a.createElement(de.a,{color:"primary",onClick:function(){return e.redirectToPageAction({page:n.SearchPage})}},c.a.createElement(fe.a,null)))});var Ee=function(e){return c.a.createElement(r.Fragment,null,c.a.createElement(ae,null),c.a.createElement(ge,null),c.a.createElement(me,{packageName:e.match.params.package}))},ve=document.getElementById("root");o.a.render(c.a.createElement(l.a,{store:p},c.a.createElement(f.a,null,c.a.createElement(function(e){var t=Object(r.useState)({}),a=Object(Y.a)(t,2),n=a[0],u=a[1];return c.a.createElement(le.Provider,Object.assign({value:{getPackageDetails:function(e){if(n[e])return n[e];var t={status:A.OnGoing};return u(function(a){return Object(s.a)({},a,Object(re.a)({},e,t))}),X.deps(e).then(function(t){var a=Object.keys(t.collected.metadata.dependencies||{});u(function(t){return Object(s.a)({},t,Object(re.a)({},e,{status:A.Success,package:{dependencies:a}}))})},function(t){u(function(t){return Object(s.a)({},t,Object(re.a)({},e,{status:A.Error}))})}),t}}},e))},null,c.a.createElement("div",{id:"main"},c.a.createElement("h1",null,"Package Analyzer"),c.a.createElement(g.a,{exact:!0,path:"/",component:ne}),c.a.createElement(g.a,{path:"/details/:package",component:Ee}))))),ve)}},[[136,2,1]]]);
//# sourceMappingURL=main.6ad0481d.chunk.js.map