(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,a){e.exports=a(263)},137:function(e,t,a){},139:function(e,t,a){},141:function(e,t,a){},154:function(e,t,a){},156:function(e,t,a){},179:function(e,t,a){},261:function(e,t,a){},263:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),u=a.n(c),s=(a(137),a(288)),o=a(286),i=(a(139),a(287)),l=(a(141),a(284)),p=a(106),d=a.n(p);var m=function(e){return r.a.createElement("div",{className:"query-error"},r.a.createElement("p",null,"Query failed with error: ",e.error),r.a.createElement(l.a,{variant:"contained",onClick:function(){return e.retry()}},"Retry ",r.a.createElement(d.a,null)))},f=(a(154),a(156),a(107)),g=a.n(f),v=a(109),h=a.n(v),b=a(82),k=a.n(b),E=a(108),y=a.n(E),O=a(53),j=a.n(O);var w=function(e){var t=e.package.name,a=e.package.author?e.package.author.username:"N.A",n=e.score.detail,c={maintenance:Math.round(5*n.maintenance),popularity:Math.round(5*n.popularity),quality:Math.round(5*n.quality)};return r.a.createElement(g.a,{className:"package-card",onClick:function(){return e.select()}},r.a.createElement(y.a,{className:"card-header",avatar:r.a.createElement(j.a,{className:"card-avatar","aria-label":t},t[0]||""),title:t,subheader:e.package.version}),r.a.createElement(h.a,null,r.a.createElement(k.a,{color:"textSecondary",gutterBottom:!0},a),r.a.createElement(k.a,{component:"p"},e.package.description),r.a.createElement("div",{className:"package-scores"},r.a.createElement(j.a,{title:"maintenance [0-5]",className:"package-score-".concat(c.maintenance)},c.maintenance),r.a.createElement(j.a,{title:"popularity [0-5]",className:"package-score-".concat(c.popularity)},c.popularity),r.a.createElement(j.a,{title:"quality [0-5]",className:"package-score-".concat(c.quality)},c.quality))))};var S,x=function(e){var t="query-results";return 0===e.query.length?r.a.createElement("div",{id:t}):0===e.results.length?r.a.createElement("div",{id:t},r.a.createElement("p",null,"No results")):r.a.createElement("div",{id:t},r.a.createElement("div",{className:"query-results-cards"},r.a.createElement("ul",null,e.results.map(function(t,a){return r.a.createElement("li",{key:"li-".concat(a)},r.a.createElement(w,{key:a,package:t.package,score:t.score,searchScore:t.searchScore,select:function(){return e.selectPackage(t.package.name)}}))}))))},N=a(115),q=a.n(N),C=a(112),P=a.n(C),G=a(114),D=a.n(G),I=a(113),L=a.n(I),M=a(29),Q=a.n(M),R=a(40),z=a(110),A=a(111),U="https://api.npms.io",T=function(){function e(){Object(z.a)(this,e)}return Object(A.a)(e,null,[{key:"deps",value:function(){var e=Object(R.a)(Q.a.mark(function e(t){var a,n;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(U,"/v2/package/").concat(encodeURIComponent(t)),e.next=3,fetch(a);case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("[Status: ".concat(n.status,"] ").concat(n.statusText));case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"list",value:function(){var e=Object(R.a)(Q.a.mark(function e(t,a){var n,r;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return n="".concat(U,"/v2/search/suggestions?q=").concat(encodeURIComponent(t),"&size=").concat(a),e.next=5,fetch(n);case 5:if((r=e.sent).ok){e.next=8;break}throw new Error("[Status: ".concat(r.status,"] ").concat(r.statusText));case 8:return e.next=10,r.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),B=a(28);!function(e){e.Success="success",e.Error="error",e.OnGoing="ongoing"}(S||(S={}));var F=a(289),J=9;var H=Object(F.a)(function(e){var t=function(e,t,a){var r=Object(n.useState)(0),c=Object(B.a)(r,2),u=c[0],s=c[1],o=Object(n.useState)(e),i=Object(B.a)(o,2),l=i[0],p=i[1],d=Object(n.useState)(S.Success),m=Object(B.a)(d,2),f=m[0],g=m[1],v=Object(n.useState)({query:e,state:S.Success,results:t}),h=Object(B.a)(v,2),b=h[0],k=h[1];return Object(n.useEffect)(function(){var e=!1;return function(){var t=Object(R.a)(Q.a.mark(function t(){var n;return Q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return g(S.OnGoing),t.prev=1,t.next=4,a(l);case 4:if(n=t.sent,!e){t.next=7;break}return t.abrupt("return");case 7:g(S.Success),k({query:l,state:S.Success,results:n}),t.next=17;break;case 11:if(t.prev=11,t.t0=t.catch(1),!e){t.next=15;break}return t.abrupt("return");case 15:g(S.Error),k({query:l,state:S.Error,error:t.t0.message||String(t.t0)});case 17:case"end":return t.stop()}},t,null,[[1,11]])}));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}},[l,u]),{query:l,status:f,setQuery:p,runQuery:function(){return s(function(e){return e+1})},lastSearch:b}}("",[],function(e){return T.list(e,J)}),a=t.query,c=t.status,u=t.setQuery,s=t.runQuery,o=t.lastSearch,l=c===S.OnGoing?r.a.createElement(P.a,null):c===S.Success?r.a.createElement(L.a,null):r.a.createElement(D.a,null);return r.a.createElement("div",{id:"package-selector"},r.a.createElement(i.a,{id:"package-name-input",label:"Package Name",variant:"outlined",onChange:function(e){return u(e.currentTarget.value)},value:a,InputProps:{endAdornment:r.a.createElement(q.a,{position:"start"},l)}}),o.state===S.Success?r.a.createElement(x,{query:o.query,results:o.results,selectPackage:function(t){e.history.push("/details/".concat(encodeURIComponent(t)))}}):r.a.createElement(m,{error:o.error,retry:function(){return s()}}))});var W=function(){return r.a.createElement(H,null)},K=a(47),V=(a(179),a(129)),X=a(127),Y=a.n(X),Z=a(49),$=a(48),_=Object(n.createContext)({});function ee(e){return{nodes:[],ongoingNodes:[{label:e,depth:0,status:S.OnGoing}],links:[]}}function te(e){var t=function(){var e=Object(n.useContext)(_);if(void 0===e)throw new Error("usePackageDetails must be used within a PackageDetailsProvider");return e}(),a=t.packages,r=t.loadPackageDetails,c=Object(n.useState)(ee(e)),u=Object(B.a)(c,2),s=u[0],o=u[1],i=function(e){if(0!==e.ongoingNodes.length){for(var t=Object(Z.a)(e.nodes),n=Object(Z.a)(e.links),c=[],u=new Set([].concat(Object(Z.a)(e.nodes),Object(Z.a)(e.ongoingNodes)).map(function(e){return e.label})),s=Object(Z.a)(e.ongoingNodes);s.length>0;){var i=s.pop(),l=i.label,p=i.depth,d=a[l];d||(d={status:S.OnGoing},r(l));var m={label:l,depth:p,status:d.status};switch(d.status){case S.Error:t.push(m);break;case S.OnGoing:c.push(m);break;case S.Success:t.push(m);var f=!0,g=!1,v=void 0;try{for(var h,b=d.package.dependencies[Symbol.iterator]();!(f=(h=b.next()).done);f=!0){var k=h.value;n.push({target:l,source:k}),u.has(k)||(s.push({label:k,depth:p+1}),u.add(k))}}catch(E){g=!0,v=E}finally{try{f||null==b.return||b.return()}finally{if(g)throw v}}}}o({nodes:t,ongoingNodes:c,links:n})}};return Object(n.useEffect)(function(){var t=ee(e);i(t)},[e]),Object(n.useEffect)(function(){return i(s)},[a]),{graph:{nodes:s.nodes.concat(s.ongoingNodes),links:s.links},numLoading:s.ongoingNodes.length,total:s.nodes.length+s.ongoingNodes.length}}function ae(){return{width:window.innerWidth,height:window.innerHeight}}var ne=800,re=600;var ce=function(e){var t=te(e.packageName),a=t.graph,c=t.numLoading,u=t.total,s=function(){var e=Object(n.useState)(ae()),t=Object(B.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)(function(){function e(){r(ae())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]),a}().width;if(c>0)return r.a.createElement(n.Fragment,null,r.a.createElement(Y.a,null),r.a.createElement("div",null,"Currently loading ",c," package(s)..."),r.a.createElement("div",null,"Over ",u," detected"));var o=s>=ne?ne:s,i=Math.floor(o*re/ne),l=a.nodes.map(function(e){switch(e.status){case S.Error:return{id:e.label,color:"red"};case S.OnGoing:return{id:e.label,color:"green"};case S.Success:var t=Math.min(64*e.depth,191),a=t<16?"0".concat(t.toString(16)):t.toString(16);return{id:e.label,color:"#".concat(a).concat(a,"ff")}}}),p=a.links.map(function(e){return Object(K.a)({},e)});return r.a.createElement("div",{className:"package-details"},r.a.createElement("h2",null,e.packageName," (",u," packages)"),r.a.createElement("div",{className:"package-force-directed"},r.a.createElement("div",{style:{textAlign:"left",display:"inline-block",width:"".concat(o,"px")}},r.a.createElement(V.a,{graphData:{nodes:l,links:p},nodeLabel:"id",width:o,height:i,linkDirectionalParticles:1}))))},ue=(a(261),a(285)),se=a(128),oe=a.n(se);var ie=Object(F.a)(function(e){return r.a.createElement("div",{id:"floating-menu"},r.a.createElement(ue.a,{color:"primary",onClick:function(){return e.history.push("/")}},r.a.createElement(oe.a,null)))});var le=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(ie,null),r.a.createElement(ce,{packageName:decodeURIComponent(e.match.params.package)}))},pe=document.getElementById("root");u.a.render(r.a.createElement(s.a,null,r.a.createElement(function(e){var t=Object(n.useState)({}),a=Object(B.a)(t,2),c=a[0],u=a[1],s=Object(n.useCallback)(function(){var e=Object(R.a)(Q.a.mark(function e(t){var a,n;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c[t]){e.next=2;break}return e.abrupt("return",c[t]);case 2:return u(function(e){return Object(K.a)({},e,Object($.a)({},t,{status:S.OnGoing}))}),e.prev=3,e.next=6,T.deps(t);case 6:a=e.sent,n=Object.keys(a.collected.metadata.dependencies||{}),u(function(e){return Object(K.a)({},e,Object($.a)({},t,{status:S.Success,package:{dependencies:n}}))}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),u(function(e){return Object(K.a)({},e,Object($.a)({},t,{status:S.Error}))});case 14:case"end":return e.stop()}},e,null,[[3,11]])}));return function(t){return e.apply(this,arguments)}}(),[]);return r.a.createElement(_.Provider,Object.assign({value:{packages:c,loadPackageDetails:s}},e))},null,r.a.createElement("div",{id:"main"},r.a.createElement("h1",null,"Package Analyzer"),r.a.createElement(o.a,{exact:!0,path:"/",component:W}),r.a.createElement(o.a,{path:"/details/:package",component:le})))),pe)}},[[132,2,1]]]);
//# sourceMappingURL=main.63071ee3.chunk.js.map